<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Joseph Spratt - Portfolio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../css/main.css" />
        <link rel="stylesheet" href="../css/trackerBlog.css" />
		<noscript><link rel="stylesheet" href="../css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="../../index.html" class="logo">
									<span class="symbol"><img src="../../images/logo.svg" alt="" /></span><span class="title">Joseph Spratt</span>
								</a>
						</div>
					</header>

				<!-- Main -->
					<div id="main">
						<div class="inner">
                                <h1>Personal Portfolio &#127797;</h1>
                                <h2 style="letter-spacing: 0;">Building a Crypto Currency Tracker in Salesforce with LWC. &#128218;</h2>
                                <div>
                                    <span class="image main">
                                        <img src="../../images/art-rachen-sM4r-swmcoY-unsplash.jpg" alt="main blog picture">
                                    </span>
                                </div>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> Introduction </h3>
								<p>
                                    May 12th 2022 saw the price of <a href="https://www.coinbase.com/price/terra-luna" style="color:darkmagenta">Terra (LUNA)</a> fall 96% in a day. $1,000,000 invested before the crash is now worth around $3. People lost 
                                    life savings overnight. The knock-on effect sent shockwaves through the crypto market and saw the prices of Bitcoin, Ethereum and Coinbase all tumble. 
                                    So much so that even Binance itself had to suspend trading. 
                                    The crash got me thinking about price and market visibility for crypto assets whilst working on internal networks and applications. Could we expose an integration in Salesforce that would 
                                    allow someone to quickly scan or check for an asset using real-time data? For a while, I had been wanting to learn some LWC (Lighting Web Components), so I thought I would try and build a small 
                                    application that meets this requirement.
                                    For more information on the LUNA crash checkout, the following article: 
                                    <a href="https://www.coindesk.com/learn/the-fall-of-terra-a-timeline-of-the-meteoric-rise-and-crash-of-ust-and-luna/" style="color:darkmagenta">The Rise and Fall of LUNA</a> 
                                    and video <a href="https://www.youtube.com/watch?v=3KZY41SqaTI" style="color:darkmagenta">How This Man Just Caused a $45 BILLION Crash [Terra Luna].</a> 
                                </p>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> Usage </h3>
                                <p style="margin-bottom: 1rem;">
                                    The <a href="https://crypto-tracker-demo-developer-edition.um8.force.com/" style="color:darkmagenta">Crypto Tracker Application</a> allows a user to search for a specific ticker. For example BTC (Bitcoin).
                                    <span class="image main mobile-img-resize">
                                        <img src="../../images/Screenshot 2022-05-23 at 13.58.34.png" alt="main blog picture">
                                    </span>
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    When searching for a specific ticker this will display the following: 
                                    <ul>
                                        <li style="margin-bottom: 0;"> Name of coin and link to offical site.</li>
                                        <li style="margin-bottom: 0;"> The price chart showing the last 24 hours. y-axis: PRICE USD, x-axis: HOURS. </li>
                                        <li style="margin-bottom: 0;"> The current price at the time of page load and 24 hour percentage change.</li>
                                        <li style="margin-bottom: 0;"> A breakdown of price and volume percent change over the last 24h, 7 days and 30 days.</li>
                                    </ul>
                                </p>
                                <p style="margin-bottom: 0.5rem;">The user can freely update or change the ticker. On clicking enter or searching for a valid ticker with length >= 3 the application will dynamically update the chart and other data displayed based on the coin ticker entered. 
                                <em style="color: #fc5858"> **** (For mobile viewing the display will not be as visible or clearly formatted. Please view with the phone horizontally).</em> 
                                </p>
                                <p>Lastly, the user will be able to see the top trending coins for the last 24 hours scrolling along the bottom of the application. The data is a snapshot of each specific trending coin. 
                                    Which includes the ticker, the price (USD) and the hourly percentage change.
                                </p>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> The Application</h3>
                                <p style="margin-bottom: 0.3rem;">
                                    <a href="https://crypto-tracker-demo-developer-edition.um8.force.com/" style="color:darkmagenta">Crypto Tracker Application</a> 
                                </p>
                                <p style="margin-bottom: 0;">Video Example:</p>
                                <p style="margin-bottom: 1rem;">
                                    <div class="videoWrapper">
                                        <iframe src="https://youtube.com/embed/lspowGPkmPM" allowfullscreen></iframe>
                                    </div>
                                </p>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> Technical Details</h3>
                                <p style="margin-bottom: 0.5rem;">
                                    The Crypto Tracker Application is hosted on a public page on a Salesforce community in my developer edition org. When it first loads, it authenticates with the two API's I am using to fetch
                                    the realtime data: <a href="https://min-api.cryptocompare.com/" style="color:darkmagenta">CryptoCompare</a> and <a href="https://rapidapi.com/BraveNewCoin/api/bravenewcoin" style="color:darkmagenta">BraveNewCoin</a>.
                                    I am storing the client id's and secrets in a custom setting within Salesforce. 
                                </p>
                                <p style="margin-bottom: 0.5rem;">After authenticating a call is made to CryptoCompare to fetch the trending coins for the past 24 hours. The data is deserialized into a APEX response class, formatted in the js and passed through to the front end in the form of an array. This can then be passed in a foreach within a marquee tag. 
                                    <em>(Redundant I know, but for the sake of a small learning project I did not have the patience for custom css)</em> &#128557;.
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    On user input, there is a handler function which listens for key events. Once a user hits enter or the input length satisfies (>=3) a call is made to BraveNewCoin. Which returns some data including a coin id (content.id).  
                                    <em style="color: #11c5ed;">****Please see Postman screenshot below (image 1).</em>
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    <span class="image main mobile-img-resize" style="margin-bottom: 0;">
                                        <img src="../../images/Screenshot 2022-05-23 at 15.25.04.png" alt="main blog picture">
                                    </span>
                                    <em style="font-size: smaller;">image 1</em>
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    If successful, the response is chained in a Promise(). Which then uses this content.id in a subsequent request to BraveNewCoin to fetch price/market data. 
                                    <em style="color: #11c5ed;">*** Please see Postman screenshot below (image 2).</em>
                                    Data is deserialized as before and returned with getters to the page.
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    <span class="image main mobile-img-resize" style="margin-bottom: 0;">
                                        <img src="../../images/Screenshot 2022-05-23 at 15.40.34.png" alt="main blog picture">
                                    </span>
                                    <em style="font-size: smaller;">image 2</em>
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    The reason for using two separate APIs is because the free version for  both includes different functionality needed for the full application. I began development with BraveNewCoin but then discovered the free 
                                    version did not support asset price history. This meant I would not be able populate data onto a chart to display price change. However, CryptoCompare did. When the second call to BraveNewCoin is made, a call is 
                                    also made to CryptoCompare to fetch the assest price and volume history. <em style="color: #11c5ed;">*** Please see Postman screenshot below (image 3) for the Price History example of XRP (Ripple).</em>
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    <span class="image main mobile-img-resize" style="margin-bottom: 0;">
                                        <img src="../../images/Screenshot 2022-05-23 at 16.03.38.png" alt="main blog picture">
                                    </span>
                                    <em style="font-size: smaller;">image 3</em>
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    As you can see in the params. The call returns the last 24 price hour entries for XRP in USD. One thing here to note is that the time is given as a Unix Timestamp. A tool 
                                    I found very useful for converting this was <a href="https://www.unixtimestamp.com/" style="color:darkmagenta">unixtimestamp.com</a>. It helped me to get my bearings when mapping the data to the chart and 
                                    checking it against other sources such as <a href="https://www.coinbase.com/" style="color:darkmagenta">Coinbase</a>.
                                </p>
                                <p style="margin-bottom: 0.5rem;">
                                    To map the data into a chart I used <a href="https://www.chartjs.org/docs/2.8.0/charts/line.html" style="color:darkmagenta">Chart JS</a> (version 2.8.0). I found that later versions are not supported in the context
                                    of the Lightning framework and would consistently break. I loaded the script as a static resource in Salesforce. After that I just had to play around a little with the config and data flow to make it dynamic. I found Chart JS to 
                                    be a really powerful tool and I am only using its OOTB basics.  
                                </p>
                                <p>
                                    Lastly, I used logic in the js to render colours red/green for percentages and graph fill based on if a price/volume was negative or positive. To format/style the page I mostly used the <a href="https://www.lightningdesignsystem.com/" style="color:darkmagenta">Lightning Design System</a>
                                    leaning a lot on 'slds-grid' in particular. <em style="color: #11c5ed;">*** See html screenshot below (image 4).</em>
                                </p>
                                <p style="margin-bottom: 1rem;">
                                    <span class="image main mobile-img-resize" style="margin-bottom: 0;">
                                        <img src="../../images/Screenshot 2022-05-24 at 10.27.07.png" alt="main blog picture">
                                    </span>
                                    <em style="font-size: smaller;">image 4</em>
                                </p>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> Github Repo </h3>
                                <p>
                                     The code is available at my <a href="https://github.com/JosephSpratt/LWC-Crypto-Tracker" style="color:darkmagenta">Github LWC-Crypto-Tracker Repo </a>.
                                </p>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> Limitations </h3>
                                <ul>
                                    <li style="margin-bottom: 0;">
                                        Yes, the data is real-time but they are free to use api licenses so data can be a little inaccurate at times.
                                    </li>
                                   <li style="margin-bottom: 0;">Data is very limited to price/volume metrics. </li>
                                   <li style="color: #fc5858">Please do not use this application to make any financial/investment decisions. It was purely an experiment to see if an integration of this kind was possible and to learn from.</li>
                                </ul>
                                <h3 style="letter-spacing: 0; margin-bottom: 1rem;"> ToDo's </h3>
                                <ul>
                                    <li>Clean up code, I was kind of in the headspace of just wanting to get it done once I learnt a few LWC basics. Hence the cleanup is needed.</li>
                                    <li>Perhaps extend the functionality so users can get price watches/notifications in Salesforce for specific coins.</li>
                                    <li>There is a bug which causes the scrolling tickers to jump to the start on the first scroll.</li>
                                    <li>Improve error handling. I am using AuraException handling but it could probably be improved/more in-depth/specific on the front-end.</li>
                                    <li>Add a label for the x-axis.</li>
                                </ul>
                                <p style="margin: 0; margin-top: 2rem; font-size:smaller; font-weight: 600;"><em>Joseph Spratt - 24/05/2022</em></p>
						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">
							<section>
								<ul class="icons">
									<li><a href="https://www.instagram.com/josephspratt/" class="icon brands style2 fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="https://github.com/JosephSpratt" class="icon brands style2 fa-github"><span class="label">GitHub</span></a></li>
									<li><a href="https://www.linkedin.com/in/joseph-spratt/" class="icon brands style2 fa-linkedin"><span class="label">Linkedin</span></a></li>
								</ul>
							</section>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="../js/jquery.min.js"></script>
			<script src="../js/browser.min.js"></script>
			<script src="../js/breakpoints.min.js"></script>
			<script src="../js/util.js"></script>
			<script src="../js/main.js"></script>

	</body>
</html>
